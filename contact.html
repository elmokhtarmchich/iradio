<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8" />
    <title>اتصل بنا - iRadio.ma</title>
    <meta name="description" content="تواصل مع iRadio.ma. أرسل لنا أسئلتك وملاحظاتك." />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="apple-touch-icon" sizes="180x180" href="/favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./favicon_io/favicon-16x16.png">
    <link rel="manifest" href="./manifest.webmanifest">

    <link href="./style.css" rel="stylesheet">
    <link href="./topnav.css" rel="stylesheet">
    <link href="./contact.css" rel="stylesheet">

    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>
<body class="subpage">

    <div class="topnav" id="myTopnav">
      <a class="active" href="index.html">
        <img alt="home" src="./favicon_io/android-chrome-192x192.png" class="logoimg">
        <img alt="home" class="logo" src="./icon/logotext.png" ></a>
      <a href="./contact.html" target="_blank"><img alt="contact" class="img" src="./icon/contact.svg"></a>
      <a onclick="notifyMe()"><img alt="notify" class="img" src="./icon/bell.svg"></a>
      <a href="#webapp"><img alt="add as app" class="img" src="./icon/app.svg"></a>
      <a href="blog.iradio.ma" target="_blank"><img alt="blog" class="img" src="./icon/blog.svg"></a>
    </div>

    <div class="container content-card">
        <h1>اتصل بنا</h1>
        <p>لديك سؤال أو ملاحظة؟ املأ النموذج أدناه للتواصل معنا.</p>
        
        <form id="contact-form">
            <div class="form-group">
                <label for="name">الاسم</label>
                <input type="text" id="name" name="name" required>
            </div>
            <div class="form-group">
                <label for="email">البريد الإلكتروني</label>
                <input type="email" id="email" name="email" required>
            </div>
            <div class="form-group">
                <label for="message">الرسالة</label>
                <textarea id="message" name="message" rows="6" required></textarea>
            </div>
            <div class="form-group recaptcha-container">
                <div class="g-recaptcha" data-sitekey="6LccTNUrAAAAAA4CzAiK_U2nnpD8YYdhoNdcFmCl"></div>
            </div>
            <div class="form-group">
                <button type="submit" class="submit-button">إرسال</button>
            </div>
        </form>
        <div id="form-status"></div>
    </div>

    <footer>
        <!-- Your existing footer code here -->
    </footer>

    <script>
        const form = document.getElementById('contact-form');
        const statusDiv = document.getElementById('form-status');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            statusDiv.innerHTML = 'الرجاء الانتظار...';
            statusDiv.style.display = 'block';

            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());
            data['g-recaptcha-response'] = grecaptcha.getResponse();

            try {
                const response = await fetch('https://summer-sun-a0ca.elmokhtar-mchich.workers.dev/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                if (result.success) {
                    statusDiv.innerHTML = 'تم إرسال رسالتك بنجاح!';
                    statusDiv.className = 'success';
                    form.reset();
                    grecaptcha.reset();
                } else {
                    statusDiv.innerHTML = `فشل الإرسال: ${result.message}`;
                    statusDiv.className = 'error';
                }
            } catch (error) {
                statusDiv.innerHTML = 'حدث خطأ أثناء إرسال النموذج.';
                statusDiv.className = 'error';
            }
        });
    </script>

</body>
</html>